{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/youe/RuralCommunityPartnersIntern/app/api/submit-form/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { Resend } from \"resend\";\n\nconst resend = new Resend(process.env.RESEND_API_KEY);\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const { formType, data, timestamp } = body;\n\n    // Format email content based on form type\n    let subject = \"\";\n    let htmlContent = \"\";\n\n    switch (formType) {\n      case \"general-support\":\n        subject = `New General Support Request from ${data.fullName}`;\n        htmlContent = `\n          <h2>New General Support Request</h2>\n          <p><strong>Name:</strong> ${data.fullName}</p>\n          <p><strong>Email:</strong> ${data.email}</p>\n          <p><strong>Phone:</strong> ${data.phone}</p>\n          <p><strong>Organization:</strong> ${data.organization || \"Not provided\"}</p>\n          <p><strong>Type of Assistance:</strong> ${data.assistanceType}</p>\n          <p><strong>Description:</strong></p>\n          <p>${data.description}</p>\n          <hr>\n          <p><em>Submitted: ${new Date(timestamp).toLocaleString()}</em></p>\n        `;\n        break;\n\n      case \"mentorship\":\n        subject = `New Mentorship Application from ${data.fullName}`;\n        htmlContent = `\n          <h2>New Mentorship Program Application</h2>\n          <p><strong>Name:</strong> ${data.fullName}</p>\n          <p><strong>Email:</strong> ${data.email}</p>\n          <p><strong>Phone:</strong> ${data.phone}</p>\n          <p><strong>Business Name:</strong> ${data.businessName}</p>\n          <p><strong>Business Stage:</strong> ${data.businessStage}</p>\n          <p><strong>Industry:</strong> ${data.industry}</p>\n          <p><strong>Business Idea/Venture:</strong></p>\n          <p>${data.businessIdea}</p>\n          <p><strong>Areas Needing Mentorship:</strong></p>\n          <p>${data.mentorshipAreas}</p>\n          <hr>\n          <p><em>Submitted: ${new Date(timestamp).toLocaleString()}</em></p>\n        `;\n        break;\n\n      case \"technical\":\n        subject = `New Technical Assistance Request from ${data.fullName}`;\n        htmlContent = `\n          <h2>New Technical Assistance Request</h2>\n          <p><strong>Name:</strong> ${data.fullName}</p>\n          <p><strong>Email:</strong> ${data.email}</p>\n          <p><strong>Phone:</strong> ${data.phone}</p>\n          <p><strong>Organization:</strong> ${data.organization}</p>\n          <p><strong>Project Title:</strong> ${data.projectTitle}</p>\n          <p><strong>Type of Assistance:</strong> ${data.assistanceType}</p>\n          <p><strong>Timeline:</strong> ${data.timeline}</p>\n          <p><strong>Project Description:</strong></p>\n          <p>${data.projectDescription}</p>\n          <p><strong>Key Challenges/Questions:</strong></p>\n          <p>${data.challenges}</p>\n          <hr>\n          <p><em>Submitted: ${new Date(timestamp).toLocaleString()}</em></p>\n        `;\n        break;\n\n      default:\n        return NextResponse.json(\n          { success: false, message: \"Invalid form type\" },\n          { status: 400 }\n        );\n    }\n\n    // Send email using Resend\n    const { data: emailData, error } = await resend.emails.send({\n      from: \"Rural Community Partners <onboarding@resend.dev>\",\n      to: [\"jody@hbcat.org\"],\n      replyTo: data.email,\n      subject: subject,\n      html: htmlContent,\n    });\n\n    if (error) {\n      console.error(\"[v0] Error sending email:\", error);\n      return NextResponse.json(\n        { success: false, message: \"Error sending email\" },\n        { status: 500 }\n      );\n    }\n\n    // Log for debugging\n    console.log(\"[v0] Form submission:\", { formType, data, timestamp });\n    console.log(\"[v0] Email sent successfully:\", emailData);\n\n    return NextResponse.json(\n      { success: true, message: \"Form submitted successfully\" },\n      { status: 200 }\n    );\n  } catch (error) {\n    console.error(\"[v0] Error processing form:\", error);\n    return NextResponse.json(\n      { success: false, message: \"Error processing form\" },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,SAAS,IAAI,oJAAM,CAAC,QAAQ,GAAG,CAAC,cAAc;AAE7C,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;QAEtC,0CAA0C;QAC1C,IAAI,UAAU;QACd,IAAI,cAAc;QAElB,OAAQ;YACN,KAAK;gBACH,UAAU,CAAC,iCAAiC,EAAE,KAAK,QAAQ,EAAE;gBAC7D,cAAc,CAAC;;oCAEa,EAAE,KAAK,QAAQ,CAAC;qCACf,EAAE,KAAK,KAAK,CAAC;qCACb,EAAE,KAAK,KAAK,CAAC;4CACN,EAAE,KAAK,YAAY,IAAI,eAAe;kDAChC,EAAE,KAAK,cAAc,CAAC;;aAE3D,EAAE,KAAK,WAAW,CAAC;;4BAEJ,EAAE,IAAI,KAAK,WAAW,cAAc,GAAG;QAC3D,CAAC;gBACD;YAEF,KAAK;gBACH,UAAU,CAAC,gCAAgC,EAAE,KAAK,QAAQ,EAAE;gBAC5D,cAAc,CAAC;;oCAEa,EAAE,KAAK,QAAQ,CAAC;qCACf,EAAE,KAAK,KAAK,CAAC;qCACb,EAAE,KAAK,KAAK,CAAC;6CACL,EAAE,KAAK,YAAY,CAAC;8CACnB,EAAE,KAAK,aAAa,CAAC;wCAC3B,EAAE,KAAK,QAAQ,CAAC;;aAE3C,EAAE,KAAK,YAAY,CAAC;;aAEpB,EAAE,KAAK,eAAe,CAAC;;4BAER,EAAE,IAAI,KAAK,WAAW,cAAc,GAAG;QAC3D,CAAC;gBACD;YAEF,KAAK;gBACH,UAAU,CAAC,sCAAsC,EAAE,KAAK,QAAQ,EAAE;gBAClE,cAAc,CAAC;;oCAEa,EAAE,KAAK,QAAQ,CAAC;qCACf,EAAE,KAAK,KAAK,CAAC;qCACb,EAAE,KAAK,KAAK,CAAC;4CACN,EAAE,KAAK,YAAY,CAAC;6CACnB,EAAE,KAAK,YAAY,CAAC;kDACf,EAAE,KAAK,cAAc,CAAC;wCAChC,EAAE,KAAK,QAAQ,CAAC;;aAE3C,EAAE,KAAK,kBAAkB,CAAC;;aAE1B,EAAE,KAAK,UAAU,CAAC;;4BAEH,EAAE,IAAI,KAAK,WAAW,cAAc,GAAG;QAC3D,CAAC;gBACD;YAEF;gBACE,OAAO,gJAAY,CAAC,IAAI,CACtB;oBAAE,SAAS;oBAAO,SAAS;gBAAoB,GAC/C;oBAAE,QAAQ;gBAAI;QAEpB;QAEA,0BAA0B;QAC1B,MAAM,EAAE,MAAM,SAAS,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC;YAC1D,MAAM;YACN,IAAI;gBAAC;aAAiB;YACtB,SAAS,KAAK,KAAK;YACnB,SAAS;YACT,MAAM;QACR;QAEA,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,SAAS;YAAsB,GACjD;gBAAE,QAAQ;YAAI;QAElB;QAEA,oBAAoB;QACpB,QAAQ,GAAG,CAAC,yBAAyB;YAAE;YAAU;YAAM;QAAU;QACjE,QAAQ,GAAG,CAAC,iCAAiC;QAE7C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAM,SAAS;QAA8B,GACxD;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,SAAS;QAAwB,GACnD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}