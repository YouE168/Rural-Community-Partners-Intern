{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/youe/RuralCommunityPartnersIntern/app/api/submit-form/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { Resend } from \"resend\";\n\nconst resend = new Resend(process.env.RESEND_API_KEY);\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const { formType, data, timestamp } = body;\n\n    let subject = \"\";\n    let htmlContent = \"\";\n\n    switch (formType) {\n      case \"support\":\n        // For the get-support page (unified form)\n        subject = `New Support Request from ${data.name} - ${data.serviceType}`;\n        htmlContent = `\n          <h2>New Support Request</h2>\n          <p><strong>Name:</strong> ${data.name}</p>\n          <p><strong>Email:</strong> ${data.email}</p>\n          <p><strong>Phone:</strong> ${data.phone || \"Not provided\"}</p>\n          <p><strong>Organization:</strong> ${data.organization || \"Not provided\"}</p>\n          <p><strong>County:</strong> ${data.county}</p>\n          <p><strong>Type of Support:</strong> ${data.serviceType}</p>\n          <p><strong>Message:</strong></p>\n          <p>${data.message}</p>\n          <hr>\n          <p><em>Submitted: ${new Date(timestamp).toLocaleString()}</em></p>\n        `;\n        break;\n\n      case \"general-support\":\n        subject = `New General Support Request from ${data.fullName}`;\n        htmlContent = `\n          <h2>New General Support Request</h2>\n          <p><strong>Name:</strong> ${data.fullName}</p>\n          <p><strong>Email:</strong> ${data.email}</p>\n          <p><strong>Phone:</strong> ${data.phone}</p>\n          <p><strong>Organization:</strong> ${data.organization || \"Not provided\"}</p>\n          <p><strong>Type of Assistance:</strong> ${data.assistanceType}</p>\n          <p><strong>Description:</strong></p>\n          <p>${data.description}</p>\n          <hr>\n          <p><em>Submitted: ${new Date(timestamp).toLocaleString()}</em></p>\n        `;\n        break;\n\n      case \"mentorship\":\n        subject = `New Mentorship Application from ${data.fullName}`;\n        htmlContent = `\n          <h2>New Mentorship Program Application</h2>\n          <p><strong>Name:</strong> ${data.fullName}</p>\n          <p><strong>Email:</strong> ${data.email}</p>\n          <p><strong>Phone:</strong> ${data.phone}</p>\n          <p><strong>Business Name:</strong> ${data.businessName}</p>\n          <p><strong>Business Stage:</strong> ${data.businessStage}</p>\n          <p><strong>Industry:</strong> ${data.industry}</p>\n          <p><strong>Business Idea/Venture:</strong></p>\n          <p>${data.businessIdea}</p>\n          <p><strong>Areas Needing Mentorship:</strong></p>\n          <p>${data.mentorshipAreas}</p>\n          <hr>\n          <p><em>Submitted: ${new Date(timestamp).toLocaleString()}</em></p>\n        `;\n        break;\n\n      case \"community-investment\":\n        subject = `New Community Investment Request from ${data.name}`;\n        htmlContent = `\n          <h2>New Community Investment Request</h2>\n          \n          <h3>Contact Information</h3>\n          <p><strong>Name:</strong> ${data.name}</p>\n          <p><strong>Email:</strong> ${data.email}</p>\n          <p><strong>Phone:</strong> ${data.phone}</p>\n          \n          <h3>Organization Details</h3>\n          <p><strong>Organization:</strong> ${data.organization}</p>\n          <p><strong>Organization Type:</strong> ${data.organizationType}</p>\n          \n          <h3>Initiative Information</h3>\n          <p><strong>Community Initiative:</strong> ${data.communityInitiative}</p>\n          <p><strong>Type of Investment Needed:</strong> ${data.investmentType}</p>\n          <p><strong>Timeline:</strong> ${data.timeline}</p>\n          \n          <h3>Project Details</h3>\n          <p>${data.projectDetails}</p>\n          \n          <h3>Partnership Goals or Outcomes Sought</h3>\n          <p>${data.partnershipGoals}</p>\n          \n          <h3>Key Challenges or Questions</h3>\n          <p>${data.challenges}</p>\n          \n          <hr>\n          <p><em>Submitted: ${new Date(timestamp).toLocaleString()}</em></p>\n        `;\n        break;\n\n      case \"technical\":\n        subject = `New Technical Assistance Request from ${data.fullName}`;\n        htmlContent = `\n          <h2>New Technical Assistance Request</h2>\n          <p><strong>Name:</strong> ${data.fullName}</p>\n          <p><strong>Email:</strong> ${data.email}</p>\n          <p><strong>Phone:</strong> ${data.phone}</p>\n          <p><strong>Organization:</strong> ${data.organization}</p>\n          <p><strong>Project Title:</strong> ${data.projectTitle}</p>\n          <p><strong>Type of Assistance:</strong> ${data.assistanceType}</p>\n          <p><strong>Timeline:</strong> ${data.timeline}</p>\n          <p><strong>Project Description:</strong></p>\n          <p>${data.projectDescription}</p>\n          <p><strong>Key Challenges/Questions:</strong></p>\n          <p>${data.challenges}</p>\n          <hr>\n          <p><em>Submitted: ${new Date(timestamp).toLocaleString()}</em></p>\n        `;\n        break;\n\n      case \"event-registration\":\n        subject = `New Event Registration: ${data.eventTitle} - ${data.fullName}`;\n        htmlContent = `\n          <h2>New Event Registration</h2>\n          <h3>Event Details</h3>\n          <p><strong>Event:</strong> ${data.eventTitle}</p>\n          <p><strong>Event Date:</strong> ${data.eventDate}</p>\n          <p><strong>Event ID:</strong> ${data.eventId}</p>\n          \n          <h3>Registrant Information</h3>\n          <p><strong>Name:</strong> ${data.fullName}</p>\n          <p><strong>Email:</strong> ${data.email}</p>\n          <p><strong>Phone:</strong> ${data.phone}</p>\n          <p><strong>Organization:</strong> ${data.organization || \"Not provided\"}</p>\n          \n          <h3>Additional Information</h3>\n          <p><strong>Dietary Restrictions:</strong> ${data.dietaryRestrictions || \"None\"}</p>\n          <p><strong>Accessibility Needs:</strong> ${data.accessibilityNeeds || \"None\"}</p>\n          \n          <hr>\n          <p><em>Submitted: ${new Date(timestamp).toLocaleString()}</em></p>\n        `;\n        break;\n\n      case \"contact\":\n        subject = `New Contact Form Message from ${data.name}`;\n        htmlContent = `\n          <h2>New Contact Form Submission</h2>\n          <p><strong>Name:</strong> ${data.name}</p>\n          <p><strong>Email:</strong> ${data.email}</p>\n          <p><strong>Phone:</strong> ${data.phone || \"Not provided\"}</p>\n          <p><strong>Subject:</strong> ${data.subject}</p>\n          <p><strong>Message:</strong></p>\n          <p>${data.message}</p>\n          <hr>\n          <p><em>Submitted: ${new Date(timestamp).toLocaleString()}</em></p>\n        `;\n        break;\n\n      default:\n        return NextResponse.json(\n          { success: false, message: \"Invalid form type\" },\n          { status: 400 }\n        );\n    }\n\n    const { data: emailData, error } = await resend.emails.send({\n      from: \"Rural Community Partners <noreply@ruralcommunitypartners.org>\",\n      to: [\"jody@hbcat.org\"],\n      replyTo: data.email,\n      subject: subject,\n      html: htmlContent,\n    });\n\n    if (error) {\n      console.error(\"Error sending email:\", error);\n      return NextResponse.json(\n        { success: false, message: \"Error sending email\" },\n        { status: 500 }\n      );\n    }\n\n    console.log(\"Form submission:\", { formType, data, timestamp });\n    console.log(\"Email sent successfully:\", emailData);\n\n    return NextResponse.json(\n      { success: true, message: \"Form submitted successfully\" },\n      { status: 200 }\n    );\n  } catch (error) {\n    console.error(\"Error processing form:\", error);\n    return NextResponse.json(\n      { success: false, message: \"Error processing form\" },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,SAAS,IAAI,oJAAM,CAAC,QAAQ,GAAG,CAAC,cAAc;AAE7C,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;QAEtC,IAAI,UAAU;QACd,IAAI,cAAc;QAElB,OAAQ;YACN,KAAK;gBACH,0CAA0C;gBAC1C,UAAU,CAAC,yBAAyB,EAAE,KAAK,IAAI,CAAC,GAAG,EAAE,KAAK,WAAW,EAAE;gBACvE,cAAc,CAAC;;oCAEa,EAAE,KAAK,IAAI,CAAC;qCACX,EAAE,KAAK,KAAK,CAAC;qCACb,EAAE,KAAK,KAAK,IAAI,eAAe;4CACxB,EAAE,KAAK,YAAY,IAAI,eAAe;sCAC5C,EAAE,KAAK,MAAM,CAAC;+CACL,EAAE,KAAK,WAAW,CAAC;;aAErD,EAAE,KAAK,OAAO,CAAC;;4BAEA,EAAE,IAAI,KAAK,WAAW,cAAc,GAAG;QAC3D,CAAC;gBACD;YAEF,KAAK;gBACH,UAAU,CAAC,iCAAiC,EAAE,KAAK,QAAQ,EAAE;gBAC7D,cAAc,CAAC;;oCAEa,EAAE,KAAK,QAAQ,CAAC;qCACf,EAAE,KAAK,KAAK,CAAC;qCACb,EAAE,KAAK,KAAK,CAAC;4CACN,EAAE,KAAK,YAAY,IAAI,eAAe;kDAChC,EAAE,KAAK,cAAc,CAAC;;aAE3D,EAAE,KAAK,WAAW,CAAC;;4BAEJ,EAAE,IAAI,KAAK,WAAW,cAAc,GAAG;QAC3D,CAAC;gBACD;YAEF,KAAK;gBACH,UAAU,CAAC,gCAAgC,EAAE,KAAK,QAAQ,EAAE;gBAC5D,cAAc,CAAC;;oCAEa,EAAE,KAAK,QAAQ,CAAC;qCACf,EAAE,KAAK,KAAK,CAAC;qCACb,EAAE,KAAK,KAAK,CAAC;6CACL,EAAE,KAAK,YAAY,CAAC;8CACnB,EAAE,KAAK,aAAa,CAAC;wCAC3B,EAAE,KAAK,QAAQ,CAAC;;aAE3C,EAAE,KAAK,YAAY,CAAC;;aAEpB,EAAE,KAAK,eAAe,CAAC;;4BAER,EAAE,IAAI,KAAK,WAAW,cAAc,GAAG;QAC3D,CAAC;gBACD;YAEF,KAAK;gBACH,UAAU,CAAC,sCAAsC,EAAE,KAAK,IAAI,EAAE;gBAC9D,cAAc,CAAC;;;;oCAIa,EAAE,KAAK,IAAI,CAAC;qCACX,EAAE,KAAK,KAAK,CAAC;qCACb,EAAE,KAAK,KAAK,CAAC;;;4CAGN,EAAE,KAAK,YAAY,CAAC;iDACf,EAAE,KAAK,gBAAgB,CAAC;;;oDAGrB,EAAE,KAAK,mBAAmB,CAAC;yDACtB,EAAE,KAAK,cAAc,CAAC;wCACvC,EAAE,KAAK,QAAQ,CAAC;;;aAG3C,EAAE,KAAK,cAAc,CAAC;;;aAGtB,EAAE,KAAK,gBAAgB,CAAC;;;aAGxB,EAAE,KAAK,UAAU,CAAC;;;4BAGH,EAAE,IAAI,KAAK,WAAW,cAAc,GAAG;QAC3D,CAAC;gBACD;YAEF,KAAK;gBACH,UAAU,CAAC,sCAAsC,EAAE,KAAK,QAAQ,EAAE;gBAClE,cAAc,CAAC;;oCAEa,EAAE,KAAK,QAAQ,CAAC;qCACf,EAAE,KAAK,KAAK,CAAC;qCACb,EAAE,KAAK,KAAK,CAAC;4CACN,EAAE,KAAK,YAAY,CAAC;6CACnB,EAAE,KAAK,YAAY,CAAC;kDACf,EAAE,KAAK,cAAc,CAAC;wCAChC,EAAE,KAAK,QAAQ,CAAC;;aAE3C,EAAE,KAAK,kBAAkB,CAAC;;aAE1B,EAAE,KAAK,UAAU,CAAC;;4BAEH,EAAE,IAAI,KAAK,WAAW,cAAc,GAAG;QAC3D,CAAC;gBACD;YAEF,KAAK;gBACH,UAAU,CAAC,wBAAwB,EAAE,KAAK,UAAU,CAAC,GAAG,EAAE,KAAK,QAAQ,EAAE;gBACzE,cAAc,CAAC;;;qCAGc,EAAE,KAAK,UAAU,CAAC;0CACb,EAAE,KAAK,SAAS,CAAC;wCACnB,EAAE,KAAK,OAAO,CAAC;;;oCAGnB,EAAE,KAAK,QAAQ,CAAC;qCACf,EAAE,KAAK,KAAK,CAAC;qCACb,EAAE,KAAK,KAAK,CAAC;4CACN,EAAE,KAAK,YAAY,IAAI,eAAe;;;oDAG9B,EAAE,KAAK,mBAAmB,IAAI,OAAO;mDACtC,EAAE,KAAK,kBAAkB,IAAI,OAAO;;;4BAG3D,EAAE,IAAI,KAAK,WAAW,cAAc,GAAG;QAC3D,CAAC;gBACD;YAEF,KAAK;gBACH,UAAU,CAAC,8BAA8B,EAAE,KAAK,IAAI,EAAE;gBACtD,cAAc,CAAC;;oCAEa,EAAE,KAAK,IAAI,CAAC;qCACX,EAAE,KAAK,KAAK,CAAC;qCACb,EAAE,KAAK,KAAK,IAAI,eAAe;uCAC7B,EAAE,KAAK,OAAO,CAAC;;aAEzC,EAAE,KAAK,OAAO,CAAC;;4BAEA,EAAE,IAAI,KAAK,WAAW,cAAc,GAAG;QAC3D,CAAC;gBACD;YAEF;gBACE,OAAO,gJAAY,CAAC,IAAI,CACtB;oBAAE,SAAS;oBAAO,SAAS;gBAAoB,GAC/C;oBAAE,QAAQ;gBAAI;QAEpB;QAEA,MAAM,EAAE,MAAM,SAAS,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC;YAC1D,MAAM;YACN,IAAI;gBAAC;aAAiB;YACtB,SAAS,KAAK,KAAK;YACnB,SAAS;YACT,MAAM;QACR;QAEA,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,wBAAwB;YACtC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,SAAS;YAAsB,GACjD;gBAAE,QAAQ;YAAI;QAElB;QAEA,QAAQ,GAAG,CAAC,oBAAoB;YAAE;YAAU;YAAM;QAAU;QAC5D,QAAQ,GAAG,CAAC,4BAA4B;QAExC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAM,SAAS;QAA8B,GACxD;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,SAAS;QAAwB,GACnD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}